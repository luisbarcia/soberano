{{/* layouts/_default/archive.html */}}
{{/* Archive layout: groups all posts by year using .Pages.GroupByDate. */}}
{{/* Usage: create a content file with `layout: archive` in front matter. */}}

{{ define "title" }}{{ .Title }} Â· {{ site.Title }}{{ end }}

{{ define "main" }}

<header class="post-header">
  <h1 class="post-header__title">{{ .Title }}</h1>
  {{ with .Description }}
  <p class="text-dim">{{ . }}</p>
  {{ end }}
</header>

{{ $posts := where site.RegularPages "Section" "posts" }}
{{ $groups := $posts.GroupByDate "2006" }}

{{ if $groups }}
<div class="archive">
  {{ range $groups }}
  <section class="archive__year">
    <h2 class="archive__year-title">{{ .Key }}</h2>
    <div class="post-list">
      {{ range .Pages }}
      {{ partial "post-item.html" . }}
      {{ end }}
    </div>
  </section>
  {{ end }}
</div>
{{ else }}
<p class="text-dim">{{ T "nothingPublished" }}</p>
{{ end }}

{{ end }}
